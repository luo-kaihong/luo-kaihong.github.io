<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>渗透 on 罗铠鸿</title>
        <link>https://luo-kaihong.github.io/categories/%E6%B8%97%E9%80%8F/</link>
        <description>Recent content in 渗透 on 罗铠鸿</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <copyright>luokaihong</copyright>
        <lastBuildDate>Sat, 19 Jul 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://luo-kaihong.github.io/categories/%E6%B8%97%E9%80%8F/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>2025-Initial</title>
        <link>https://luo-kaihong.github.io/p/2025-initial/</link>
        <pubDate>Sat, 19 Jul 2025 00:00:00 +0000</pubDate>
        
        <guid>https://luo-kaihong.github.io/p/2025-initial/</guid>
        <description>&lt;hr&gt;
&lt;h1 id=&#34;春秋云境-initial&#34;&gt;&lt;strong&gt;春秋云境 Initial&lt;/strong&gt;
&lt;/h1&gt;&lt;h2 id=&#34;靶标介绍&#34;&gt;靶标介绍：
&lt;/h2&gt;&lt;p&gt;Initial是一套难度为简单的靶场环境，完成该挑战可以帮助玩家初步认识内网渗透的简单流程。该靶场只有一个flag，各部分位于不同的机器上。&lt;/p&gt;
&lt;h2 id=&#34;flag1&#34;&gt;flag1:
&lt;/h2&gt;&lt;p&gt;扫出来一个网站&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719204128535.png&#34;
	width=&#34;1221&#34;
	height=&#34;401&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719204128535_hu_869ee2aed57e3f10.png 480w, https://luo-kaihong.github.io/p/2025-initial/image-20250719204128535_hu_3bf7f3e95e517531.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250719204128535&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;304&#34;
		data-flex-basis=&#34;730px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;是个登入框，由fscan，判断出来为thinkphp.5.0.23 rce漏洞&lt;/p&gt;
&lt;img src=&#34;image-20250719204148110.png&#34; alt=&#34;image-20250719204148110&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h2 id=&#34;&#34;&gt;
&lt;/h2&gt;&lt;h3 id=&#34;使用thinkphp工具一把梭sudo提权&#34;&gt;使用thinkphp工具一把梭+sudo提权
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719204559906.png&#34;
	width=&#34;833&#34;
	height=&#34;302&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719204559906_hu_d2a02fed10daa220.png 480w, https://luo-kaihong.github.io/p/2025-initial/image-20250719204559906_hu_2e57c09050fdac5a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250719204559906&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;275&#34;
		data-flex-basis=&#34;661px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;蚁剑发现可以发现当前的权限是 &lt;code&gt;www-data&lt;/code&gt;，查找具有 SUID 权限的文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;find / -user root -perm -4000 -print 2&amp;gt;/dev/null
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719210132547.png&#34;
	width=&#34;677&#34;
	height=&#34;259&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719210132547_hu_dbb9c6bc2bce4357.png 480w, https://luo-kaihong.github.io/p/2025-initial/image-20250719210132547_hu_b945f8ee7bda092b.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250719210132547&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;261&#34;
		data-flex-basis=&#34;627px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;发现可以进行sudo提权，sudo -l （就是列出你能用 sudo 执行的命令）&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719210542247.png&#34;
	width=&#34;885&#34;
	height=&#34;89&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719210542247_hu_4fbbc795a2277b56.png 480w, https://luo-kaihong.github.io/p/2025-initial/image-20250719210542247_hu_f4df65f596e2da81.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250719210542247&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;994&#34;
		data-flex-basis=&#34;2386px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;可以发现存在一个root权限并且没有密码的mysql&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://blog.csdn.net/Bossfrank/article/details/132035121&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;渗透测试：Linux提权精讲（三）之sudo方法第三期_nmap sudo 提权-CSDN博客&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://gtfobins.github.io/gtfobins/mysql/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;mysql | GTFOBins&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719212109329.png&#34;
	width=&#34;747&#34;
	height=&#34;260&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719212109329_hu_87ec90b6cd18fb8d.png 480w, https://luo-kaihong.github.io/p/2025-initial/image-20250719212109329_hu_be3d3027422bb3c2.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250719212109329&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;287&#34;
		data-flex-basis=&#34;689px&#34;
	
&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;flag{60b53231-
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;flag2和3内网打点&#34;&gt;flag2和3：内网打点
&lt;/h2&gt;&lt;p&gt;&lt;code&gt;ifconfig&lt;/code&gt;发现了一个内部网段 172.22.1.15&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719212519464.png&#34;
	width=&#34;604&#34;
	height=&#34;260&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719212519464_hu_d8c4f9ef99bc1cde.png 480w, https://luo-kaihong.github.io/p/2025-initial/image-20250719212519464_hu_b24ec6dae219543a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250719212519464&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;232&#34;
		data-flex-basis=&#34;557px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;所以需要用fscan 扫描内网IP的C段(目的是发现更多存活主机和开放端口)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;首先先上传linux版本的fscan（直接拖进蚁剑）&lt;/strong&gt;&lt;/p&gt;
&lt;img src=&#34;image-20250719223308100.png&#34; alt=&#34;image-20250719223308100&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;&lt;strong&gt;然后在tmp目录终端下执行&lt;code&gt;./fscan -h 172.22.1.0/24&lt;/code&gt;,查看result.txt&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719224302824.png&#34;
	width=&#34;1887&#34;
	height=&#34;965&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-initial/image-20250719224302824_hu_95d62cf9d22d9c2e.png 480w, https://luo-kaihong.github.io/p/2025-initial/image-20250719224302824_hu_ffcaad52952f9e56.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250719224302824&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;195&#34;
		data-flex-basis=&#34;469px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;我们搜集到如下信息：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;172.22.1.2:DC域控
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;172.22.1.21:Windows的机器并且存在MS17-010 漏洞
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;172.22.1.18:信呼OA办公系统
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
        </item>
        <item>
        <title>2025-Hospital</title>
        <link>https://luo-kaihong.github.io/p/2025-hospital/</link>
        <pubDate>Thu, 12 Jun 2025 00:00:00 +0000</pubDate>
        
        <guid>https://luo-kaihong.github.io/p/2025-hospital/</guid>
        <description>&lt;hr&gt;
&lt;hr&gt;
&lt;p&gt;地址：&lt;a class=&#34;link&#34; href=&#34;https://yunjing.ichunqiu.com/major/detail/1106?type=1&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;仿真场景-专业徽章&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;概述：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;在这个场景中，你将扮演一名渗透测试工程师，被派遣去测试某家医院的网络安全性。你的目标是成功获取所有服务器的权限，以评估公司的网络安全状况。该靶场共有 4 个flag，分布于不同的靶机。
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h1 id=&#34;flag1&#34;&gt;flag1
&lt;/h1&gt;&lt;h2 id=&#34;shiro反序列化rce&#34;&gt;shiro反序列化RCE
&lt;/h2&gt;&lt;p&gt;先下载fscan。https://github.com/shadow1ng/fscan/releases/tag/1.8.4&lt;/p&gt;
&lt;p&gt;扫描得到&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://luo-kaihong.github.io/p/2025-hospital/image-20250612221343251.png&#34;
	width=&#34;1871&#34;
	height=&#34;415&#34;
	srcset=&#34;https://luo-kaihong.github.io/p/2025-hospital/image-20250612221343251_hu_6f87acaf50e76fb4.png 480w, https://luo-kaihong.github.io/p/2025-hospital/image-20250612221343251_hu_6d5fe2f6c190cfc9.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;image-20250612221343251&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;450&#34;
		data-flex-basis=&#34;1082px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;发现了jsessionid，明显的Shiro特征，同时发现有acatuator泄露，而且发现&lt;code&gt;heapdump&lt;/code&gt;文件，这就想到了shiro的密钥，跟京麟ctf差不多，感觉会打这里，继续往下看&lt;/p&gt;
&lt;p&gt;[&lt;a class=&#34;link&#34; href=&#34;https://zhuanfeng.flowus.cn/share/84b85c28-5b6b-470f-ba62-c521e8551f4a&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;第三届京麒CTF 热身赛]EzLogin&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;登入上面的网站，爆破密码是admin123，且发现重要的shiro特征&lt;/p&gt;
&lt;img src=&#34;image-20250612221917854.png&#34; alt=&#34;image-20250612221917854&#34; style=&#34;zoom:33%;&#34; /&gt;
&lt;p&gt;登入发现没什么&lt;/p&gt;
&lt;img src=&#34;image-20250612222006620.png&#34; alt=&#34;image-20250612222006620&#34; style=&#34;zoom: 33%;&#34; /&gt;
&lt;p&gt;那就是打shiro起手了，扫描这个网站，得到存在heapdump信息泄露，访问url/actuator/heapdump，下载heapdump文件，由上面那个京麒的比赛，看来就是这里面就是key了。&lt;/p&gt;
&lt;img src=&#34;image-20250612222243966.png&#34; alt=&#34;image-20250612222243966&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;使用JDumpSpider工具一键解密&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;java -jar JDumpSpider-1.1-SNAPSHOT-full.jar heapdump
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;img src=&#34;image-20250612223528807.png&#34; alt=&#34;image-20250612223528807&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;得到key是&lt;code&gt;GAYysgMQhG7/CzIJlVpR2g==&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;使用shiro利用工具一把梭&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;java -jar shiro_attack-2.2.jar
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;打入内存马后冰蝎连接（冰蝎连接时脚本选择jsp，php不行，蚁剑连接也是一样shell文件后缀是jsp，但是我的蚁剑shell文件类型没有jsp所以连不上）&lt;/p&gt;
&lt;img src=&#34;image-20250617210828756.png&#34; alt=&#34;image-20250617210828756&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;利用冰蝎反弹shell&lt;/p&gt;
&lt;img src=&#34;image-20250617213919451.png&#34; alt=&#34;image-20250617213919451&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;然后查找具有root权限的SUID的文件&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;find / -user root -perm -4000 -print 2&amp;gt;/dev/null
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;img src=&#34;image-20250617214113248.png&#34; alt=&#34;image-20250617214113248&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;发现vim有suid权限&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://gtfobins.github.io/gtfobins/vim/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;vim | GTFOBins&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;非预期直接猜到flag位置&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;vim /root/flag/flag01.txt
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;img src=&#34;image-20250617214419741.png&#34; alt=&#34;image-20250617214419741&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;h2 id=&#34;预期vimbasic提权升级交互式终端&#34;&gt;预期：vim.basic提权：升级交互式终端
&lt;/h2&gt;&lt;p&gt;升级交互式终端，以欺骗某些命令让它们以为在合适的终端运行,vim.basic有suid权限，但是必须有tty，也就是交互式shell&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;python3 -c &amp;#34;import pty;pty.spawn(&amp;#39;/bin/bash&amp;#39;)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;完整的命令本来是&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;python3 -c &amp;#34;import pty;pty.spawn(&amp;#39;/bin/bash&amp;#39;)&amp;#34;	
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;script /dev/null -c bash
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ctrl+z
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;stty raw -echo; fg
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;reset
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;xterm-256color
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://saucer-man.com/information_security/233.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;实现交互式shell的几种方式 - yanq的个人博客&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;然后suid提权就有了root权限&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/usr/bin/vim.basic  -c &amp;#39;:python3 import os; os.execl(&amp;#34;/bin/sh&amp;#34;, &amp;#34;sh&amp;#34;, &amp;#34;-pc&amp;#34;, &amp;#34;reset; exec sh -p&amp;#34;)&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;img src=&#34;image-20250617230628561.png&#34; alt=&#34;image-20250617230628561&#34; style=&#34;zoom:50%;&#34; /&gt;
&lt;p&gt;这个思路是看这个&lt;a class=&#34;link&#34; href=&#34;https://aniale.top/article/yiyo9zcb/#web01&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;春秋云镜-Hospital | aniale&amp;rsquo;s blog&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;本来是看&lt;a class=&#34;link&#34; href=&#34;https://chimedal.github.io/2024/09/30/Hospital/index.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;春秋云境-Hospital&lt;/a&gt;，&lt;a class=&#34;link&#34; href=&#34;https://lca.xlog.app/chun-qiu-yun-jing-fang-zhen-ba-chang-Hospital-shi-cao?locale=zh&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;春秋云镜仿真靶场Hospital实操 - lca&lt;/a&gt;这两篇，交互终端后添加一个拥有root的hacker账户，但是不知道为啥云服务器上编辑这个/etc/passwd有点问题（编辑云服务器的/etc/passwd可以，题目的不行），所以就直接提权拿flag了&lt;/p&gt;
&lt;h1 id=&#34;flag2&#34;&gt;flag2
&lt;/h1&gt;</description>
        </item>
        
    </channel>
</rss>
